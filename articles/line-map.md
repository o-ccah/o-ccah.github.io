# 直線を直線に移す写像

[Twitter](https://twitter.com/19_97_31_23/status/1428908091270066181)で面白そうな問題を見かけました．解けたと思うのでメモしておきます．

## もとの問題

以下，「直線」とは，{(x, y) ∈ ℝ^2 | ax + by = c}（a, b, c ∈ ℝ，(a, b) ≠ (0, 0)）という形のℝ^2の部分集合のことをいいます．

**問題**: 写像F: ℝ^2 → ℝ^2であって直線の像が直線になるものは，アフィン写像以外に存在するか？

**解答**: 存在する．たとえばF(x, y) = (x + y^3, 0)．

## 修正した問題

もとの問題には反例がありましたが，その反例ではF の像は1本の直線に含まれていました．このようなFを除外した問題を考えます．

**問題**: 写像F: ℝ^2 → ℝ^2であって直線の像が直線になるものは，像が1本の直線に含まれるものを除くと，アフィン写像以外に存在するか？

**解答**: 存在しない．以下，それを証明する．Fを条件を満たす写像とする．

**主張1**: Fは全射である．

**証明**: 直線の像が直線になるという条件より，異なる2点p, qがFの像に属するならば，pとqを通る直線はFの像に含まれる．また，仮定より，Fの像は同一直線上にない3点を含む．これらより，Fの像はℝ^2全体である．//

**主張2**: α, βが平行でない 2 直線ならば，それらの像F(α), F(β)も平行でない2直線である．

**証明**:α ∩ β ≠ ∅よりF(α) ∩ F(β) ≠ ∅である．あとは，F(α) ≠ F(β)を示せばよい．F(α) = F(β)と仮定する．Fは全射だから（主張1），点p ∈ ℝ^2であってF(p) ∉ F(α) = F(β)を満たすものがとれる．αとβは平行でないから，pを通る任意の直線γはαまたはβと点を共有し，したがってF(γ)はF(α) = F(β)と点を共有する．したがって，F(γ)が「F(p)を通りF(α) = F(β)に平行な直線」になることはない．ところが，これはFの全射性（主張1）に反する．よって，背理法より，F(α) ≠ F(β)である．//

**主張3**:Fは単射である．

**証明**: 異なる2点p, q ∈ ℝ^2についてF(p) = F(q)と仮定する．α, βは異なる平行な 2 直線であって，それぞれp, qを通るとする．直線F(α)とF(β)は点F(p) = F(q)を共有する．点r ∈ βをF(r) ≠ F(p) = F(q)となるようにとると，pとrを通る直線γのFによる像はF(p) = F(q)とF(r)を通る直線，すなわちF(β)だが，これは主張2に反する．よって，背理法よりFは単射である．//

以上より，Fは平行でない2直線を平行でない 2 直線に移し，また，直線αを固定すると，Fは「αに平行な直線の全体」から「F(α)に平行な直線の全体」への全単射を与える．

定義域および終域のℝ^2にアフィン変換を施すことで，一般性を失わずF(0, 0) = (0, 0)，F(1, 0) = (1, 0)，F(0, 1) = (0, 1)と仮定する．このとき，Fは直線x = sを直線x = f(s)に移し，直線y = tを直線y = g(t)に移すとして全単射f, g: ℝ → ℝを定めることができる．Fはこのf, gを用いて

F(x, y) = (f(x), g(y))

と書ける．F(0, 0) = (0, 0)，F(1, 0) = (1, 0)，F(0, 1) = (0, 1)より，f(0) = g(0) = 0，f(1) = g(1) = 1である．

F(0, 0) = (0, 0)かつF(1, 1) = (1, 1)だから，Fは直線y = xを直線y = xに移す．したがって，f = gである．

F(1, 0) = (1, 0)かつF(0, 1) = (0, 1)だから，Fは直線y = 1 - xを直線y = 1 - xに移す．したがって，任意のx ∈ ℝに対してf(1 - x) = 1 - f(x)である．

任意のa ∈ ℝに対して，F(0, 0) = (0, 0)かつF(1, a) = (1, f(a))だから，Fは直線y = axを直線y = f(a) xに移す．したがって，任意のx ∈ ℝに対してf(ax) = f(a)f(x)である．記号を置き直せば，任意のx, y ∈ ℝに対してf(xy) = f(x)f(y)となる．

以上より，最終的な主張は次の主張から従う．

**主張4**: 関数f: ℝ → ℝであって，任意のx, y ∈ ℝに対してf(1 - x) = 1 - f(x)かつf(xy) = f(x) f(y)を満たすものは，恒等写像のみである．

**証明**: 任意のx, y ∈ ℝに対して，

f(x - xy)  
= f(x(1 - y))  
= f(x)f(1 - y)  
= f(x)(1 - f(y))  
= f(x) - f(x)f(y)  
= f(x) - f(xy)

である．記号を置き直せば，任意のx, y ∈ ℝ，x + y ≠ 0に対してf(x + y) = f(x) + f(y)となる．この式からf(0) = 0がわかり，したがってf(1) = f(1 - 0) = 1 - f(0) = 1である．また，任意のx ∈ ℝ \setminus {-1}に対して

f(-x)  
= f(1 - (1 + x))  
= 1 - f(1 + x)  
= 1 - f(1) - f(x)  
= -f(x)

だから，結局任意のx, y ∈ ℝに対してf(x + y) = f(x) + f(y)が成り立つ．以上より，fはℝの自己環準同型である．よく知られているように，これは恒等写像しかありえない．//

## 考えられる一般化

素直な一般化として，ℝ^2をℝ^nにしたり，「直線」をより高次元の部分アフィン空間にしたりというのがありますが，まだちゃんと考えていません．
