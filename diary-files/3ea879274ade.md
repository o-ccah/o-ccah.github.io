# ある組合せ論的な問題について

確か算数オリンピックの問題だったと思いますが，ふと次の問題を思い出しました：

> あるクラスで委員を決めるため，クラスの全員がそれぞれ自分を含めたクラス全員の中から 4 人の異なる人の名前を投票用紙に記入して投票した．開票作業をしていると，どの異なる 2 枚の投票用紙にもちょうど 1 つ共通の名前があることがわかった．このクラスの人数を求めよ．

数学的に整理して一般化すると．次のようになります：

> n を 2 以上の整数とする．X_1, ..., X_N は {1, ..., N} の n 元部分集合で，任意の 2 つの異なる i, j に対して #(X_i ∩ X_j) = 1 であるという．N を求めよ（n を用いて表せ）．

このような N が存在すれば，N = n^2 - n + 1 であることがわかります．証明は次のとおりです：

> x ∈ {1, ..., N} が k 個の X_i に属するとする．一般性を失わず x ∈ X_1 ∩ ... ∩ X_k とすると，条件より，X_1, ..., X_n の x 以外の元（延べ k(n - 1) 個）はすべて異なる．k > n とすると，x を元にもたない X_i が X_1, ..., X_k のすべてと交わることは不可能だから，すべての X_i が x を含むことになるが，すると N ≧ 1 + N(n - 1) となり，n ≧ 2 に矛盾する．したがって，k ≦ n である．これが任意の x ∈ {1, ..., N} に対して成り立つから，各 x はちょうど n 個の X_i に属する．さて，ふたたび x を固定し，一般性を失わず x ∈ X_1 ∩ ... ∩ X_n とする．X_1, ..., X_n に属さない元 y があるとすると，ここまでの結果より y ∈ X_i となる y があるが，この X_i が X_1, ..., X_n のすべてと交わることは不可能である．よって，N = #(X_1 ∪ ... ∪ X_n) = 1 + n(n - 1) = n^2 - n + 1 である．

では，問題の状況はどのような n に対して実現されるでしょうか？ 問題の状況が実現されるとして，x ∈ {1, ..., N} を 1 つ固定し，一般性を失わず x ∈ X_1 ∩ ... ∩ X_n とします．y ∈ X_1 \ {x} に対して，上の議論より，y を含む X_i は X_1 の他にちょうど n - 1 個あります．それらから y を除いた n - 1 個の n - 1 元集合を Y_{y, 1}, ..., Y_{y, n - 1} とします．すると，

* 各 Y_{y, i} は X_2 \ {x}, ..., X_n \ {x} とちょうど 1 つずつ元を共有し，
* Y_{y, 1}, ..., Y_{y, n - 1} は S = (X_2 ∪ ... ∪ X_n) \ {x} の分割を与え，
* y, z ∈ X_1 \ {x}，y ≠ z ならば，任意の i, j に対して #(Y_{y, i} ∩ Y_{z, j}) = 1 (\*)

となります．結局，{X_2 \ {x}, ..., X_n \ {x}} と y ∈ X_1 \ {x} に対する {Y_{y, 1}, ..., Y_{y, n - 1}} とを合わせて，S を n - 1 個の n - 1 元集合に分割する方法が n 通り与えられていることになります．しかも，これらからどのように 2 つの異なる分割を選んでも，その 2 つは上の条件 (\*) を満たします．逆に，このように (n - 1)^2 元集合 S の n 通りの分割を与えることができれば，ここまでの議論を逆に辿ることで，上の問題の状況が実現できることがわかります．以上で，次の問題に帰着できました（m = n - 1 と置く）：

> m を 1 以上の整数とし，S を m^2 元集合とする．S の「m 個の m 元集合への分割」{A_1, ..., A_m}, {B_1, ..., B_m} について，任意の i, j に対して #(A_i ∩ B_j) = 1 であるとき，{A_1, ..., A_m} と {B_1, ..., B_m} は**座標ペア**であるという．S の「m 個の m 元集合への分割」の族であって，その任意の異なる 2 元が座標ペアであるものを，**座標ペア族**という．どのような m に対してサイズ m + 1 の座標ペア族が存在するか？

一般に，m ≧ 2 に対して座標ペア族のサイズは m + 1 以下です．実際，({A_{p, 1}, ..., A_{p, m}} : 1 ≦ p ≦ k) が座標ペア族であるとし，x ∈ S を 1 つ固定し，一般性を失わず各 p に対して x ∈ A_{p, 1} とすると，A_{p, 1} (1 ≦ p ≦ k) の x 以外の元はすべて異なるから 1 + k(m - 1) ≦ m^2 であり，したがって k ≦ m + 1 です．

m = p^e（p は素数，e は正の整数）と書けるときは，S を有限体上の平面 F_m^2 とみなして P^1 F_m = {F_m^2 上の直線} の元に応じて分割を与えることで，サイズ #P^1 F_m = m + 1 の座標ペア族が作れます．では，

> m ≧ 2 について，サイズ m + 1 の座標ペア族が存在すれば m は素数の冪である，といえるでしょうか？
